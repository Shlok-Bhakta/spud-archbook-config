; ── Catppuccin Mocha ──────────────────────────────────────────────────────────
[colors]
crust      = #11111b
mantle     = #181825
base       = #1e1e2e
surface0   = #313244
surface1   = #45475a
surface2   = #585b70
overlay0   = #6c7086
subtext0   = #a6adc8
subtext1   = #bac2de
text       = #cdd6f4
rosewater  = #f5e0dc
flamingo   = #f2cdcd
pink       = #f5c2e7
mauve      = #cba6f7
red        = #f38ba8
maroon     = #eba0ac
peach      = #fab387
yellow     = #f9e2af
green      = #a6e3a1
teal       = #94e2d5
sky        = #89dceb
sapphire   = #74c7ec
blue       = #89b4fa
lavender   = #b4befe

; ── Bar ───────────────────────────────────────────────────────────────────────
[bar/main]
width            = 100%
height           = 28pt
radius           = 0
fixed-center     = true
bottom           = false

background       = ${colors.crust}
foreground       = ${colors.text}

; outer padding so crust wraps all module blocks
padding-left     = 1
padding-right    = 1

; gap between modules (crust shows through)
module-margin-left  = 0
module-margin-right = 0

font-0 = "CaskaydiaCove Nerd Font:size=10:weight=bold;2"
font-1 = "CaskaydiaCove Nerd Font:size=8;2"

modules-left   = xworkspaces
modules-center = mpris
modules-right  = weather wlan volume backlight battery tray

cursor-click  = pointer
cursor-scroll = ns-resize
enable-ipc    = true
wm-restack    = i3

; ── Workspaces ────────────────────────────────────────────────────────────────
[module/xworkspaces]
type             = internal/xworkspaces
pin-workspaces   = false
enable-click     = true
enable-scroll    = true

; active workspace: rosewater bg, crust text — stands out clearly
label-active            = %name%
label-active-foreground = ${colors.crust}
label-active-background = ${colors.rosewater}
label-active-padding    = 2

; occupied (has windows but not focused): dimmed subtext
label-occupied            = %name%
label-occupied-foreground = ${colors.subtext1}
label-occupied-background = ${colors.mantle}
label-occupied-padding    = 2

; urgent
label-urgent            = %name%
label-urgent-foreground = ${colors.crust}
label-urgent-background = ${colors.red}
label-urgent-padding    = 2

; empty: hide completely
label-empty =

; ── Media (mpris) ─────────────────────────────────────────────────────────────
[module/mpris]
type     = custom/script
exec     = playerctl status 2>/dev/null | grep -q Stopped && echo "" || playerctl metadata --format "{{ artist }} - {{ title }}" 2>/dev/null | cut -c1-45
interval = 2
format          = <label>
format-prefix   = "󰎈  "
format-prefix-foreground = ${colors.teal}
format-background = ${colors.mantle}
format-padding  = 2
label-foreground = ${colors.teal}
label-maxlen    = 45
label-ellipsis  = true
click-left      = playerctl play-pause
click-right     = playerctl next
double-click-left = playerctl previous
; hide the module entirely when nothing is playing
exec-if         = playerctl status 2>/dev/null | grep -qv Stopped

; ── Weather ───────────────────────────────────────────────────────────────────
[module/weather]
type              = custom/script
exec              = ~/.config/polybar/scripts/weather.sh
exec-if           = ping -c1 -W2 wttr.in 2>/dev/null
interval          = 3600
format            = <label>
format-background = ${colors.mantle}
format-padding    = 2
label-foreground  = ${colors.sky}

; ── Network (wifi SSID + signal) ──────────────────────────────────────────────
[module/wlan]
type              = internal/network
interface-type    = wireless
interval          = 4

format-connected          = <label-connected>
format-connected-background = ${colors.mantle}
format-connected-padding  = 2
label-connected           = 󰖩  %essid% %signal%%
label-connected-foreground = ${colors.yellow}

format-disconnected          = <label-disconnected>
format-disconnected-background = ${colors.mantle}
format-disconnected-padding  = 2
label-disconnected           = 󰖪  offline
label-disconnected-foreground = ${colors.surface2}

; ── Volume (pamixer / pulseaudio) ─────────────────────────────────────────────
[module/volume]
type     = custom/script
exec     = ~/.config/polybar/scripts/volume.sh
interval = 1
format            = <label>
format-background = ${colors.mantle}
format-padding    = 2
label-foreground  = ${colors.blue}
click-left        = pavucontrol &
scroll-up         = pamixer -i 2
scroll-down       = pamixer -d 2

; ── Backlight ─────────────────────────────────────────────────────────────────
; Using custom/script so brightnessctl write perms aren't needed from polybar
[module/backlight]
type     = custom/script
exec     = ~/.config/polybar/scripts/backlight.sh
interval = 1
format            = <label>
format-background = ${colors.mantle}
format-padding    = 2
label-foreground  = ${colors.mauve}
scroll-up         = brightnessctl set +5%
scroll-down       = brightnessctl set 5%- -n 1

; ── Battery ───────────────────────────────────────────────────────────────────
[module/battery]
type                    = internal/battery
full-at                 = 99
low-at                  = 15
battery                 = BAT0
adapter                 = AC
poll-interval           = 5

format-charging            = <animation-charging> <label-charging>
format-charging-background = ${colors.mantle}
format-charging-padding    = 2
label-charging             = %percentage%%
label-charging-foreground  = ${colors.green}
animation-charging-0       = 󰢜
animation-charging-1       = 󰂆
animation-charging-2       = 󰂇
animation-charging-3       = 󰂈
animation-charging-4       = 󰂉
animation-charging-foreground = ${colors.green}
animation-charging-framerate  = 750

format-discharging            = <ramp-capacity> <label-discharging>
format-discharging-background = ${colors.mantle}
format-discharging-padding    = 2
label-discharging             = %percentage%%
label-discharging-foreground  = ${colors.peach}
ramp-capacity-0               = 
ramp-capacity-1               = 
ramp-capacity-2               = 
ramp-capacity-3               = 
ramp-capacity-4               = 
ramp-capacity-foreground      = ${colors.peach}

format-full            = <label-full>
format-full-prefix     = 󰚥 
format-full-background = ${colors.mantle}
format-full-padding    = 2
format-full-prefix-foreground = ${colors.green}
label-full             = %percentage%%
label-full-foreground  = ${colors.green}

format-low            = <ramp-capacity> <label-low>
format-low-background = ${colors.mantle}
format-low-padding    = 2
label-low             = %percentage%%
label-low-foreground  = ${colors.red}

; ── Tray ──────────────────────────────────────────────────────────────────────
[module/tray]
type          = internal/tray
tray-padding  = 4px
tray-size     = 14
tray-spacing  = 4px
tray-background = ${colors.mantle}

; ── Settings ──────────────────────────────────────────────────────────────────
[settings]
screenchange-reload = true
pseudo-transparency = false
