# picom config - Catppuccin Mocha
# xrender backend (safe for 4GB RAM)

backend    = "xrender";
vsync      = true;
use-damage = true;

# ── Rounded corners ───────────────────────────────────────────────────────────
corner-radius = 10;
rounded-corners-exclude = [
    "window_type = 'dock'",
    "window_type = 'desktop'",
    "class_g = 'Polybar'",
    "class_g = 'i3bar'",
    "class_g = 'rofi'"
];

# ── Shadows ───────────────────────────────────────────────────────────────────
shadow         = true;
shadow-radius  = 20;
shadow-opacity = 0.5;
shadow-offset-x = -12;
shadow-offset-y = -12;
shadow-color   = "#11111b";
shadow-exclude = [
    "window_type = 'dock'",
    "window_type = 'desktop'",
    "window_type = 'notification'",
    "_GTK_FRAME_EXTENTS@:c",
    "class_g = 'Polybar'",
    "class_g = 'i3bar'",
    "class_g = 'slop'"
];

# ── Fading ────────────────────────────────────────────────────────────────────
fading        = true;
fade-in-step  = 0.04;
fade-out-step = 0.04;
fade-delta    = 4;
fade-exclude  = [
    "class_g = 'rofi'"
];

# ── Opacity ───────────────────────────────────────────────────────────────────
inactive-opacity = 1.0;
active-opacity   = 1.0;
frame-opacity    = 1.0;

# ── Blur (xrender only - enable glx above for real blur) ─────────────────────
# backend = "glx";
# blur-method = "dual_kawase";
# blur-strength = 3;

# ── Misc ──────────────────────────────────────────────────────────────────────
mark-wmwin-focused      = true;
mark-ovredir-focused    = true;
detect-rounded-corners  = true;
detect-client-opacity   = true;
detect-transient        = true;
unredir-if-possible     = false;
log-level               = "warn";

wintypes: {
    tooltip       = { fade = true; shadow = false; opacity = 1.0; focus = true; };
    dock          = { shadow = false; clip-shadow-above = true; };
    dnd           = { shadow = false; };
    popup_menu    = { opacity = 1.0; };
    dropdown_menu = { opacity = 1.0; };
};
